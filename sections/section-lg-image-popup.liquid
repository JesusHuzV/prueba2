{% liquid
  assign bg_color = section.settings.bg_color
  assign title_color = section.settings.title_color
  assign description_color = section.settings.description_color
  assign title_align = section.settings.title_align
  assign description_align = section.settings.description_align
  assign title_case = section.settings.title_case
  assign button_style = section.settings.button_style

  for block in section.blocks
    if block.type == 'popup'
      assign popup_bg_color = block.settings.bg_color

      if block.settings.popup_text_color == 'twcss-text-primary'
        assign popup_text_color = 'twcss-text-primary'
      endif
      if block.settings.popup_text_color == 'twcss-text-secondary'
        assign popup_text_color = 'twcss-text-secondary'
      endif
      if block.settings.popup_text_color == 'twcss-text-tertiary'
        assign popup_text_color = 'twcss-text-tertiary'
      endif
    endif
  endfor
%}
<style>
  #close_popup svg {
    width: 20px;
  }
  {% if section.settings.show_image == false %}
    @media only screen and (max-width: 1023px) {
      .ays_image-{{ section.id }} {
        display: none;
      }
    }
  {% endif %}
</style>
<section
  class='twcss-relative {{ bg_color }}'
  style='padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;'
>
  <div
    id='popup-{{ section.id }}'
    class='twcss-hidden twcss-fixed twcss-top-0 twcss-w-full twcss-h-full twcss-items-center twcss-justify-center twcss-z-10'
    style='background: {{ popup_bg_color }};'
  >
    <div class='popup_wrapper twcss-relative twcss-max-w-[860px] twcss-p-[34px] twcss-bg-brand-secondary twcss-mx-5'>
      <div
        id='close_popup'
        class='twcss-absolute twcss-top-5 twcss-right-5 twcss-cursor-pointer'
        onclick='closePopup()'
      >
        {% render 'icon-close' %}
      </div>
      {% for block in section.blocks %}
        {% if block.type == 'popup' %}
          <h1 class='{{ popup_text_color }} twcss-text-left twcss-typ-h2-subheading-b twcss-mb-10'>
            {{ block.settings.title }}
          </h1>
          <p class='{{ popup_text_color }} twcss-text-left'>
            {{ block.settings.description }}
          </p>
        {% endif %}
      {% endfor %}
    </div>
  </div>
  <div class='twcss-grid-system twcss-mt-4 twcss-mb-[58px] twcss-gap-y-[50px] lg:twcss-mt-[50px]'>
    <div class='ays_image-{{ section.id }} twcss-col-span-full lg:twcss-col-span-6 {% if section.settings.toggle_image %} lg:twcss-col-start-7 {% endif %}'>
      {% if section.settings.main_image %}
        <img
          class='twcss-h-[262px] twcss-w-full twcss-object-cover md:twcss-h-[429px] lg:twcss-h-[754px]'
          src='{{ section.settings.main_image | image_url }}'
          alt='icon'
          loading='lazy'
          width='auto'
          height='auto'
        >
      {% else %}
        <img src='https://dummyimage.com/720x600' width='auto' height='auto' loading='lazy'>
      {% endif %}
    </div>
    <div class='twcss-col-span-full twcss-row-start-1 twcss-col-start-1 {% if section.settings.toggle_image %} lg:twcss-col-start-2 {% else %} lg:twcss-col-start-8 {% endif %} twcss-mb-16 twcss-flex twcss-flex-col twcss-items-center twcss-justify-center lg:twcss-col-span-4'>
      <h2
        class='twcss-w-full twcss-typ-h2-subheading-b twcss-mb-[18px] {{ title_case }} {{ title_color }} {{ title_align }}'
      >
        {{ section.settings.title }}
      </h2>
      <p
        class='twcss-typ-body-2 twcss-w-full {{ description_color }} twcss-mb-[40px] {{ description_align }}'
      >
        {{ section.settings.description }}
      </p>

      <div
        class='twcss-flex twcss-w-full twcss-flex-col twcss-justify-between twcss-divide-y twcss-px-3'
      >
        {% for block in section.blocks %}
          {% if block.type == 'text' %}
            <div class='twcss-flex twcss-items-center twcss-justify-between twcss-py-7'>
              <div class='twcss-flex twcss-items-center'>
                {% if block.settings.icon %}
                  <div
                    class='twcss-w-12 twcss-h-12 twcss-bg-box-background twcss-overflow-hidden'
                    style='border-radius: 50%;'
                  >
                    <img
                      src='{{ block.settings.icon | image_url }}'
                      class='twcss-w-full twcss-h-full twcss-object-contain'
                      alt='icon'
                      loading='lazy'
                      width='auto'
                      height='auto'
                    >
                  </div>
                {% endif %}
                <div class='twcss-ml-[15px]'>
                  <h2 class='twcss-typ-body-2 twcss-text-primary'>
                    {{ block.settings.title }}
                  </h2>
                  <p class='twcss-typ-body-2 twcss-text-tertiary'>
                    {{ block.settings.description }}
                  </p>
                </div>
              </div>
              {% if block.settings.link %}
                <a href='{{ block.settings.link }}'>
                  {% render 'icon-arrow' %}
                </a>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
      {% if section.settings.show_button %}
        <button
          class='twcss-button twcss-button-primary twcss-mt-6 twcss-py-[14px] twcss-px-[25px] {{ button_style }}'
          {% if section.settings.link == blank %}
            onclick='popupHandler()'
          {% endif %}
        >
          {% if section.settings.link %}
            {{ section.settings.button_title | link_to: section.settings.link }}
          {% else %}
            {{ section.settings.button_title }}
          {% endif %}
        </button>
      {% endif %}
    </div>
  </div>
</section>
<script>
  const popup = document.getElementById('popup-{{ section.id }}');
  const popupHandler = () => {
    popup.style.display = 'flex';
  };
  const closePopup = () => {
    const icon_close = document.getElementById('close_popup');
    icon_close.addEventListener('click', () => {
      console.log('clik');
      popup.style.display = 'none';
    });
  };
</script>
{% schema %}
{
  "name": "lg image text popup",
  "settings": [
    {
      "type": "select",
      "id": "bg_color",
      "options": [
        {
          "value": "twcss-bg-primary",
          "label": "t:sections.all.bg_color.options__1.label"
        },
        {
          "value": "twcss-bg-secondary",
          "label": "t:sections.all.bg_color.options__2.label"
        },
        {
          "value": "twcss-bg-tertiary",
          "label": "t:sections.all.bg_color.options__3.label"
        },
        {
          "value": "twcss-bg-brand-secondary",
          "label": "t:sections.all.bg_color.options__4.label"
        },
        {
          "value": "twcss-bg-transparent",
          "label": "t:sections.all.bg_color.options__5.label"
        }
      ],
      "default": "twcss-bg-transparent",
      "label": "t:sections.all.bg_color.label"
    },
    {
      "type": "select",
      "id": "title_case",
      "options": [
        {
          "value": "twcss-lowercase",
          "label": "t:sections.all.title_case.options__1.label"
        },
        {
          "value": "twcss-capitalize",
          "label": "t:sections.all.title_case.options__2.label"
        },
        {
          "value": "twcss-uppercase",
          "label": "t:sections.all.title_case.options__3.label"
        }
      ],
      "default": "twcss-capitalize",
      "label": "t:sections.all.title_case.label"
    },
    {
      "type": "select",
      "id": "title_color",
      "options": [
        {
          "value": "twcss-text-primary",
          "label": "t:sections.all.text_color.options__1.label"
        },
        {
          "value": "twcss-text-secondary",
          "label": "t:sections.all.text_color.options__2.label"
        },
        {
          "value": "twcss-text-tertiary",
          "label": "t:sections.all.text_color.options__3.label"
        },
        {
          "value": "twcss-text-brand-secondary",
          "label": "t:sections.all.text_color.options__4.label"
        }
      ],
      "default": "twcss-text-primary",
      "label": "t:sections.all.title_color.label"
    },
    {
      "type": "select",
      "id": "title_align",
      "options": [
        {
          "value": "twcss-text-left",
          "label": "Left"
        },
        {
          "value": "twcss-text-center",
          "label": "Center"
        },
        {
          "value": "twcss-text-right",
          "label": "Right"
        }
      ],
      "default": "twcss-text-center",
      "label": "Center"
    },
    {
      "type": "select",
      "id": "description_color",
      "options": [
        {
          "value": "twcss-text-primary",
          "label": "t:sections.all.text_color.options__1.label"
        },
        {
          "value": "twcss-text-secondary",
          "label": "t:sections.all.text_color.options__2.label"
        },
        {
          "value": "twcss-text-tertiary",
          "label": "t:sections.all.text_color.options__3.label"
        },
        {
          "value": "twcss-text-brand-secondary",
          "label": "t:sections.all.text_color.options__4.label"
        }
      ],
      "default": "twcss-text-primary",
      "label": "t:sections.all.description_color.label"
    },
    {
      "type": "select",
      "id": "description_align",
      "options": [
        {
          "value": "twcss-text-left",
          "label": "Left"
        },
        {
          "value": "twcss-text-center",
          "label": "Center"
        },
        {
          "value": "twcss-text-right",
          "label": "Right"
        }
      ],
      "default": "twcss-text-center",
      "label": "t:sections.all.description_align.label"
    },
    {
      "type": "checkbox",
      "id": "show_image",
      "label": "Show image on mobile version",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "Image"
    },
    {
      "type": "checkbox",
      "id": "toggle_image",
      "label": "Place image to the right",
      "default": false
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "TUMI at your Service"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "World class quality meets world class customer service."
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "default": true,
      "label": "Show button"
    },
    {
      "type": "select",
      "id": "button_style",
      "options": [
        {
          "value": "twcss-button-primary",
          "label": "Primary button"
        },
        {
          "value": "twcss-button-secondary",
          "label": "Secondary button"
        },
        {
          "value": "twcss-button-fill",
          "label": "Fill button"
        },
        {
          "value": "twcss-button-primary-dark",
          "label": "Dark Primary button"
        },
        {
          "value": "twcss-button-secondary-dark",
          "label": "Dark Secondary button"
        },
        {
          "value": "twcss-button-fill-dark",
          "label": "Dark Fill button"
        }
      ],
      "label": "Button style",
      "default": "twcss-button-primary"
    },
    {
      "type": "text",
      "id": "button_title",
      "label": "Button Title",
      "default": "Store Hours and Services"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link",
      "info": "Adding a link here will disable the popup block."
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Feature",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "popup",
      "name": "Popup",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Popup Title"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description",
          "default": "<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore facilis error accusamus optio ducimus vero minus atque iste repudiandae commodi, dolorum officiis sed, temporibus, sapiente labore illum unde praesentium aspernatur.</p>"
        },
        {
          "type": "color_background",
          "id": "bg_color",
          "label": "t:sections.all.bg_color.label",
          "default": "linear-gradient(#333333, #888888)"
        },
        {
          "type": "select",
          "id": "popup_text_color",
          "options": [
            {
              "value": "twcss-text-primary",
              "label": "t:sections.all.text_color.options__1.label"
            },
            {
              "value": "twcss-text-secondary",
              "label": "t:sections.all.text_color.options__2.label"
            },
            {
              "value": "twcss-text-tertiary",
              "label": "t:sections.all.text_color.options__3.label"
            }
          ],
          "default": "twcss-text-primary",
          "label": "t:sections.all.text_color.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "lg image text popup"
    }
  ]
}
{% endschema %}
