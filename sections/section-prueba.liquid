{%- style -%}
  @media (max-width: 900px) {
    .mobile-row {
      display: flex;
      flex-wrap: wrap;
    }
    .mobile-row .twcss-flex {
      width: calc(50% - 1rem);
      margin-right: 1rem;
      margin-bottom: 2rem;
    }
    .mobile-row .twcss-flex:nth-child(2n) {
      margin-right: 0;
    }
  }
  #slider {
    position: relative;
  }
  .fade-out {
    transition: opacity 0.5s ease;
    opacity: 0.5;
  }
{%- endstyle -%}
<section class='twcss-flex twcss-justify-center twcss-items-center twcss-py-8 lg:twcss-py-16 color-{{ section.settings.color_scheme }} twcss-bg-brand-light-blue twcss-max-md:px-5'>
  <div
    class='twcss-w-full twcss-max-w-[1200px] twcss-max-md:max-w-full twcss-px-8 lg:twcss-px-10 '
    style='padding-top: {{ section.settings.padding_top | round: 0 }}px; padding-bottom: {{ section.settings.padding_bottom | round: 0 }}px;'
  >
    <div class='twcss-flex twcss-flex-col twcss-w-full twcss-gap-5 twcss-max-md:flex-col twcss-max-md:gap-0  md:twcss-flex-row'>
      <div class='twcss-w-full lg:twcss-w-[25%] twcss-max-md:ml-0 md:twcss-w-[100%]'>
        <div class='twcss-flex twcss-flex-col twcss-grow twcss-max-md:mt-10 twcss-pt-0 twcss-pr-0 lg:twcss-pt-10 lg:twcss-pr-10'>
          {%- if section.settings.subtitle != blank -%}
            <h2 class='twcss-font-bold twcss-w-full twcss-text-4xl twcss-font-medium twcss-tracking-tight twcss-text-amber-500 '>
              {{ section.settings.subtitle }}
            </h2>
          {%- endif -%}

          {%- if section.settings.title != blank -%}
            <h1
              class='twcss-font-bold lg:twcss-text-6xl twcss-text-5xl lg:wcss-mt-6 twcss-mt-4 twcss-leading-30 :lgtwcss-leading-40'
            >
              {{ section.settings.title }}
            </h1>
          {%- endif -%}

          {%- if section.settings.description != blank -%}
            <p class='lg:wcss-mt-10 twcss-mt-6 twcss-text-2xl twcss-leading-7'>
              {{ section.settings.description }}
            </p>
          {%- endif -%}
        </div>
      </div>
      <div class='twcss-w-full lg:twcss-w-[75%] twcss-ml-0 md:twcss-ml-5 twcss-mt-6 lg:twcss-mt-0 md:twcss-w-[100%]'>
        <div
          class='twcss-hidden  lg:twcss-w-full twcss-gap-4 lg:twcss-flex twcss-grid twcss-pb-10 twcss-col-span-12'
        >
          <div id='slider' class='twcss-flex twcss-overflow-hidden'>
            {%- for block in section.blocks -%}
              <div class='slide twcss-flex twcss-justify-center twcss-col-span-6 lg:twcss-w-[180px] lg:twcss-min-w-[180px] twcss-flex-col twcss-px-[0px] twcss-mr-4'>
                <div class='lg:twcss-flex lg:twcss-flex-col  twcss-grow '>
                  {% if block.settings.image %}
                    <img
                      src='{{ block.settings.image | image_url }}'
                      class='twcss-h-[200px] twcss-w-full twcss-object-cover md:twcss-h-[200px] lg:twcss-h-[200px] twcss-rounded-[10px]'
                      alt='logo'
                      loading='lazy'
                      width='auto'
                      height='auto'
                    >
                  {% endif %}

                  {%- if block.settings.name1 != blank -%}
                    <h3 class='twcss-mt-7 twcss-text-1xl twcss-font-semibold  twcss-text-amber-500'>
                      {{ block.settings.name1 }}
                    </h3>
                  {%- endif -%}

                  {%- if block.settings.content1 != blank -%}
                    <h5 class='twcss-mt-7 twcss-text-1xl twcss-font-thin twcss-text-secondary-grey-1  '>
                      {{ block.settings.content1 }}
                    </h5>
                  {%- endif -%}
                </div>
              </div>
            {%- endfor -%}
          </div>
        </div>
        <div
          class='lg:twcss-hidden  twcss-gap-4 twcss-pb-10 mobile-row twcss-col-span-12'
        >
          {%- for block in section.blocks -%}
            <div class='twcss-flex twcss-justify-center twcss-col-span-6 lg:twcss-w-[180px] lg:twcss-min-w-[180px] twcss-flex-col twcss-px-[0px]'>
              <div class='lg:twcss-flex lg:twcss-flex-col  twcss-grow '>
                {% if block.settings.image %}
                  <img
                    src='{{ block.settings.image | image_url }}'
                    class='twcss-h-[200px] twcss-w-full twcss-object-cover md:twcss-h-[200px] lg:twcss-h-[200px] twcss-rounded-[10px]'
                    alt='logo'
                    loading='lazy'
                    width='auto'
                    height='auto'
                  >
                {% endif %}

                {%- if block.settings.name1 != blank -%}
                  <h3 class='twcss-mt-7 twcss-text-1xl twcss-font-semibold  twcss-text-amber-500'>
                    {{ block.settings.name1 }}
                  </h3>
                {%- endif -%}

                {%- if block.settings.content1 != blank -%}
                  <h5 class='twcss-mt-7 twcss-text-1xl twcss-font-thin twcss-text-secondary-grey-1  '>
                    {{ block.settings.content1 }}
                  </h5>
                {%- endif -%}
              </div>
            </div>
          {%- endfor -%}
        </div>
        <div class='twcss-hidden lg:twcss-flex twcss-gap-4 twcss-justify-end twcss-h-20 twcss-mt-10 md:tw-block'>
          <button
            onclick='prevSlideDekstop()'
            class='twcss-w-20 twcss-flex twcss-justify-center twcss-items-center twcss-px-4 twcss-py-2 twcss-border-2 twcss-border-solid twcss-border-neutral-100 twcss-rounded-[400px]'
          >
            <svg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'>
              <path d="M11.25 13.5L6.75 9L11.25 4.5" stroke="#F7F7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button
            onclick='nextSlideDekstop()'
            class='twcss-w-20 twcss-flex twcss-justify-center twcss-items-center twcss-px-4 twcss-py-2 twcss-border-2 twcss-border-solid twcss-border-neutral-100 twcss-rounded-[400px]'
          >
            <svg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'>
              <path d="M6.75 13.5L11.25 9L6.75 4.5" stroke="#F7F7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
<div class='twcss-hidden md:twcss-flex twcss-gap-4 twcss-justify-end twcss-h-20 twcss-mt-10 md:tw-block'>
  <button
    onclick='prevSlideDekstop()'
    class='twcss-w-20 twcss-flex twcss-justify-center twcss-items-center twcss-px-4 twcss-py-2 twcss-border-2 twcss-border-solid twcss-border-neutral-100 twcss-rounded-[400px]'
  >
    <svg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'>
      <path d="M11.25 13.5L6.75 9L11.25 4.5" stroke="#F7F7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>
  <button
    onclick='nextSlideDekstop()'
    class='twcss-w-20 twcss-flex twcss-justify-center twcss-items-center twcss-px-4 twcss-py-2 twcss-border-2 twcss-border-solid twcss-border-neutral-100 twcss-rounded-[400px]'
  >
    <svg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'>
      <path d="M6.75 13.5L11.25 9L6.75 4.5" stroke="#F7F7F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>
</div>

{% javascript %}
  var slider = document.getElementById('slider');
  var slides = Array.from(slider.getElementsByClassName('slide'));
  var index = 0;
  var slideWidth = slides[0].offsetWidth;

  function updateOpacity() {
    slides.forEach(function (slide, i) {
      if (
        slider.scrollLeft + slider.offsetWidth > i * slideWidth &&
        slider.scrollLeft + slider.offsetWidth <= (i + 1) * slideWidth
      ) {
        slide.classList.add('fade-out');
      } else {
        slide.classList.remove('fade-out');
      }
    });
  }

  updateOpacity(); // Llama a la función inmediatamente después de definirla

  slider.addEventListener('scroll', updateOpacity);

  setInterval(function () {
    slider.scrollLeft = slideWidth * index;
    index++;
    if (index >= slides.length) {
      index = 0;
      slider.scrollLeft = 0;
    }
    updateOpacity();
  }, 3000);

  window.prevSlideDekstop = function () {
    index--;
    if (index < 0) {
      index = slides.length - 1;
    }
    slider.scrollLeft = slideWidth * index;
    updateOpacity();
  };

  window.nextSlideDekstop = function () {
    index++;
    if (index >= slides.length) {
      index = 0;
    }
    slider.scrollLeft = slideWidth * index;
    updateOpacity();
  };
{% endjavascript %}

{% schema %}
{
  "name": "Teams section 3",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Crew Members"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Doloremque Laudantium"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "info": "t:sections.all.colors.has_cards_info",
      "default": "background-1"
    },

    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Team",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "name1",
          "label": "Name"
        },
        {
          "type": "richtext",
          "id": "content1",
          "label": "Content"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Teams section 3"
    }
  ]
}
{% endschema %}
