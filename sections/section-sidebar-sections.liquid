<style>
  * {
    scroll-behavior: smooth;
  }
  .block_content p {
    margin-bottom: 20px;
  }
</style>

<section
  style='margin-bottom: {{ section.settings.margin_bottom }}px; margin-top: {{ section.settings.margin_top }}px;'
  class='tw-flex tw-grid-system tw-gap-5'
>
  <div class=' tw-hidden md:tw-block md:tw-w-1/5 tw-relative'>
    <ul class='tw-sticky tw-top-36'>
      {%- for block in section.blocks -%}
        <li>
          <a
            class='tw-flex tw-items-center tw-gap-5 tw-p-4 hover:tw-bg-box-background tw-transition-all tw-duration-300 item-navigation-{{ forloop.index }}'
            href='#item_{{ forloop.index }}'
          >
            <img
              src='{{ block.settings.menu_image | image_url }}'
              alt='{{ block.settings.menu_title }}'
              height='auto'
              width='30'
              loading='lazy'
            >
            {{ block.settings.menu_title }}
          </a>
        </li>
      {%- endfor -%}
    </ul>
  </div>
  <div class='tw-w-full md:tw-w-4/5'>
    <ul>
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'version_1' -%}
            <li id='item_{{ forloop.index }}'>
              <h4 class='tw-typ-h5-subtopic-3-a'>
                {{ block.settings.eyebrow }}
              </h4>
              <h2 class='tw-typ-h2-subheading-a'>{{ block.settings.title }}</h2>
              {%- if block.settings.image -%}
                <img
                  src='{{ block.settings.image | image_url }}'
                  alt='{{ block.settings.title }}'
                  height='auto'
                  width='auto'
                  loading='lazy'
                  class='tw-mb-5 !tw-h-[420px] tw-w-full tw-object-cover'
                >
              {%- endif -%}
              <div class='block_content'>
                {{ block.settings.content }}
              </div>
              <hr class='tw-hidden md:tw-block tw-my-[60px] tw-h-[1px] tw-bg-[#CCCCCC]'>
            </li>
          {%- when 'version_2' -%}
            <li id='item_{{ forloop.index }}'>
              <details class='tw-block tw-mb-2 tw-border-b tw-border-border tw-px-2 md:tw-hidden [&[open]>summary>.plus-icon]:tw-hidden [&[open]>summary>.minus-icon]:tw-block'>
                <summary class='tw-typ-h5-subtopic-3-a tw-flex tw-justify-between tw-py-3 tw-items-center'>
                  <span class='tw-flex tw-items-center tw-gap-5'>
                    {%- if block.settings.menu_image -%}
                      <img
                        src='{{ block.settings.menu_image | image_url }}'
                        alt='{{ block.settings.menu_title }}'
                        height='auto'
                        width='30'
                        loading='lazy'
                      >
                    {%- endif -%}

                    {{ block.settings.menu_title }}
                  </span>
                  <span class='plus-icon tw-rotate-90'>
                    {% render 'icon-chevron' %}
                  </span>
                  <span class='tw-hidden minus-icon -tw-rotate-90'>
                    {% render 'icon-chevron' %}
                  </span>
                </summary>
                <div class='tw-flex tw-flex-wrap'>
                  <div class='tw-w-full tw-flex tw-gap-5 tw-flex-col md:tw-flex-row tw-mb-5'>
                    {%- if block.settings.image_1 -%}
                      <img
                        src='{{ block.settings.image_1 | image_url }}'
                        alt='{{ block.settings.title_1 }}'
                        height='auto'
                        width='auto'
                        loading='lazy'
                        class='tw-object-cover !tw-h-[220px] tw-w-full md:tw-w-1/2'
                      >
                    {%- endif -%}
                    {%- if block.settings.image_2 -%}
                      <img
                        src='{{ block.settings.image_2 | image_url }}'
                        alt='{{ block.settings.title_2 }}'
                        height='auto'
                        width='auto'
                        loading='lazy'
                        class='tw-object-cover !tw-h-[220px] tw-w-full md:tw-w-1/2'
                      >
                    {%- endif -%}
                  </div>
                  <h3 class='tw-typ-h3-subtopic-1-a tw-w-full tw-mb-3'>
                    {{ block.settings.title_columns }}
                  </h3>
                  <div class='tw-w-full tw-flex tw-gap-5 tw-flex-col lg:tw-flex-row'>
                    <div>
                      {{ block.settings.content_1 }}
                    </div>
                    <div>
                      {{ block.settings.content_2 }}
                    </div>
                  </div>
                </div>
              </details>
              <div class='tw-hidden md:tw-block'>
                <div class='tw-w-full tw-flex lg:tw-gap-5 tw-flex-col md:tw-flex-row'>
                  {%- if block.settings.image_1 -%}
                    <img
                      src='{{ block.settings.image_1 | image_url }}'
                      alt='{{ block.settings.title_1 }}'
                      height='auto'
                      width='auto'
                      loading='lazy'
                      class='tw-mb-5 tw-object-cover !tw-h-[220px] tw-w-full md:tw-w-1/2 tw-pr-[10px] lg:tw-p-0'
                    >
                  {%- endif -%}
                  {%- if block.settings.image_2 -%}
                    <img
                      src='{{ block.settings.image_2 | image_url }}'
                      alt='{{ block.settings.title_2 }}'
                      height='auto'
                      width='auto'
                      loading='lazy'
                      class='tw-mb-5 tw-object-cover !tw-h-[220px] tw-w-full md:tw-w-1/2 tw-pl-[10px] lg:tw-p-0'
                    >
                  {%- endif -%}
                </div>
                <h3 class='tw-typ-h3-subtopic-1-a tw-w-full tw-mb-3'>
                  {{ block.settings.title_columns }}
                </h3>
                <div class='tw-w-full tw-flex tw-gap-5 tw-flex-col lg:tw-flex-row'>
                  <div class='tw-w-1/2'>
                    {{ block.settings.content_1 }}
                  </div>
                  <div class='tw-w-1/2'>
                    {{ block.settings.content_2 }}
                  </div>
                </div>
                <hr class='tw-my-[60px] tw-w-full tw-h-[1px] tw-bg-[#CCCCCC]'>
              </div>
            </li>
          {%- when 'version_3' -%}
            <li id='item_{{ forloop.index }}'>
              <details class='tw-block tw-mb-2 tw-border-b tw-border-border tw-px-2 md:tw-hidden [&[open]>summary>.plus-icon]:tw-hidden [&[open]>summary>.minus-icon]:tw-block'>
                <summary class='tw-typ-h5-subtopic-3-a tw-flex tw-justify-between tw-py-3 tw-items-center'>
                  <span class='tw-flex tw-items-center tw-gap-5'>
                    {%- if block.settings.menu_image -%}
                      <img
                        src='{{ block.settings.menu_image | image_url }}'
                        alt='{{ block.settings.menu_title }}'
                        height='auto'
                        width='30'
                        loading='lazy'
                      >
                    {%- endif -%}
                    {{ block.settings.menu_title }}
                  </span>
                  <span class='plus-icon tw-rotate-90'>
                    {% render 'icon-chevron' %}
                  </span>
                  <span class='tw-hidden minus-icon -tw-rotate-90'>
                    {% render 'icon-chevron' %}
                  </span>
                </summary>
                <div>
                  {%- if block.settings.image -%}
                    <img
                      src='{{ block.settings.image | image_url }}'
                      alt='{{ block.settings.title }}'
                      height='auto'
                      width='auto'
                      loading='lazy'
                      class='tw-mb-5 !tw-h-[420px] tw-w-full tw-object-cover'
                    >
                  {%- endif -%}

                  <h3 class='tw-typ-h3-subtopic-1-a tw-w-full tw-mb-3'>
                    {{ block.settings.title_columns }}
                  </h3>
                  <div class='tw-flex tw-flex-col tw-gap-5'>
                    <div class='tw-w-full'>
                      <div>
                        {{ block.settings.content_1 }}
                      </div>
                    </div>
                    <div class='tw-w-full'>
                      <div>
                        {{ block.settings.content_2 }}
                      </div>
                    </div>
                  </div>
                </div>
              </details>
              <div class='tw-hidden md:tw-block'>
                {%- if block.settings.image -%}
                  <img
                    src='{{ block.settings.image | image_url }}'
                    alt='{{ block.settings.title }}'
                    height='auto'
                    width='auto'
                    loading='lazy'
                    class='tw-mb-5 !tw-h-[420px] tw-w-full tw-object-cover'
                  >
                {%- endif -%}

                <h3 class='tw-typ-h3-subtopic-1-a tw-w-full tw-mb-3'>
                  {{ block.settings.title_columns }}
                </h3>
                <div class='tw-w-full tw-flex tw-gap-5 tw-flex-col lg:tw-flex-row'>
                  <div class='tw-w-1/2'>
                    {{ block.settings.content_1 }}
                  </div>
                  <div class='tw-w-1/2'>
                    {{ block.settings.content_2 }}
                  </div>
                </div>
                <hr class='tw-my-[60px] tw-h-[1px] tw-bg-[#CCCCCC]'>
              </div>
            </li>
        {%- endcase -%}
      {%- endfor -%}
    </ul>
  </div>
</section>

{% schema %}
{
  "name": "Sidebar with sections",
  "settings": [
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin top",
      "default": 36
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "version_1",
      "name": "version 1",
      "settings": [
        {
          "type": "header",
          "content": "Menu"
        },
        {
          "type": "text",
          "id": "menu_title",
          "label": "Menu title",
          "default": "lorem"
        },
        {
          "type": "image_picker",
          "id": "menu_image",
          "label": "Menu image"
        },
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "eyebrow",
          "label": "Eyebrow",
          "default": "Eyebrow"
        },
        {
          "type": "text",
          "id": "title",
          "label": "title",
          "default": "Title text"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        }
      ]
    },
    {
      "type": "version_2",
      "name": "version 2",
      "settings": [
        {
          "type": "header",
          "content": "Menu"
        },
        {
          "type": "text",
          "id": "menu_title",
          "label": "Menu title",
          "default": "lorem"
        },
        {
          "type": "image_picker",
          "id": "menu_image",
          "label": "Menu image"
        },
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title_columns",
          "label": "Title columns",
          "default": "lorem"
        },
        {
          "type": "header",
          "content": "Column 1"
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image"
        },
        {
          "type": "richtext",
          "id": "content_1",
          "label": "Contet"
        },
        {
          "type": "header",
          "content": "Column 2"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image"
        },
        {
          "type": "richtext",
          "id": "content_2",
          "label": "Contet"
        }
      ]
    },
    {
      "type": "version_3",
      "name": "version 3",
      "settings": [
        {
          "type": "header",
          "content": "Menu"
        },
        {
          "type": "text",
          "id": "menu_title",
          "label": "Menu title",
          "default": "lorem"
        },
        {
          "type": "image_picker",
          "id": "menu_image",
          "label": "Menu image"
        },
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title_columns",
          "label": "Title columns",
          "default": "lorem"
        },
        {
          "type": "header",
          "content": "Column 1"
        },
        {
          "type": "richtext",
          "id": "content_1",
          "label": "Contet"
        },
        {
          "type": "header",
          "content": "Column 2"
        },
        {
          "type": "richtext",
          "id": "content_2",
          "label": "Contet"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Sidebar with sections"
    }
  ]
}
{% endschema %}
