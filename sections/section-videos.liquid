{{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

<section
  class='twcss-grid-system'
  style='margin-bottom: {{ section.settings.margin_bottom }}px; margin-top: {{ section.settings.margin_top }}px;'
>
  <div class='twcss-col-span-full md:twcss-col-span-4 lg:twcss-col-span-6 xl:twcss-col-span-5 twcss-flex twcss-flex-col twcss-justify-between'>
    <div class='twcss-mx-4 md:twcss-m-0'>
      <h5 class='twcss-typ-h5-subtopic-3-a'>{{ section.settings.eyebrow }}</h5>
      <h2 class='twcss-mb-[11px] twcss-text-center twcss-text-primary twcss-typ-h2-subheading-a twcss-uppercase md:twcss-text-start'>
        {{ section.settings.title }}
      </h2>
      <p class='twcss-mb-[20px] twcss-text-center twcss-text-tertiary twcss-typ-body-1 md:twcss-text-start'>
        {{ section.settings.description }}
      </p>
    </div>
    <div class='twcss-relative'>
      <div class='container-video twcss-overflow-hidden twcss-relative twcss-rounded-3xl [&>video]:!twcss-object-cover'>
        {{ section.settings.video_one | video_tag: image_size: '2048x' }}
        <button
          type='button'
          class='play-button twcss-absolute twcss-inset-0 twcss-w-full twcss-text-2xl twcss-font-bold twcss-text-white twcss-bg-[#00000029]'
        >
          <span class='deferred-media__poster-button motion-reduce'>
            {%- render 'icon-play' -%}
          </span>
        </button>
      </div>
    </div>
  </div>
  <div class='twcss-relative twcss-mt-3 md:twcss-mt-0 twcss-col-span-full md:twcss-col-span-4 lg:twcss-col-span-6 xl:twcss-col-span-7 '>
    <div
      class='container-video twcss-overflow-hidden twcss-relative twcss-rounded-3xl [&>video]:!twcss-object-cover twcss-h-full [&>video]:twcss-h-full'
      style='overflow: -webkit-paged-y;'
    >
      {{ section.settings.video_two | video_tag: image_size: '2048x' }}
      <button
        type='button'
        class='play-button twcss-absolute twcss-inset-0 twcss-w-full twcss-text-2xl twcss-font-bold twcss-text-white twcss-bg-[#00000029]'
      >
        <span class='deferred-media__poster-button motion-reduce'>
          {%- render 'icon-play' -%}
        </span>
      </button>
    </div>
  </div>
</section>

<script>
  // change image for button
  document.querySelectorAll('.play-button').forEach((button) => {
    const container = button?.parentElement;
    const video = container.querySelector('video');
    button?.addEventListener('click', () => {
      button.classList.add('twcss-hidden');
      button.classList.remove('twcss-block');
      video.play();
    });
    video?.addEventListener('ended', () => {
      button.classList.add('twcss-block');
      button.classList.remove('twcss-hidden');
    });
  });
</script>

{% schema %}
{
  "name": "Section videos",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow",
      "default": "Eyebrow text"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Arrive Collection"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Arrive Collection"
    },
    {
      "type": "video",
      "id": "video_one",
      "label": "Video one"
    },
    {
      "type": "video",
      "id": "video_two",
      "label": "Video two"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin top",
      "default": 36
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Section videos"
    }
  ]
}
{% endschema %}
